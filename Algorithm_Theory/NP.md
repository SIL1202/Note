### P 問題（Deterministic Polynomial-time Algorithms）整理

> **A set of those deterministic algorithms which are taking Polynomial-time.**
> P 類包含所有可以在多項式時間內（polynomial time）由**確定性演算法（deterministic algorithm）**解決的問題。
>
> - 有一個確定性的演算法（每一步都可預測）
> - 該演算法的時間複雜度是多項式時間（例如 O(n), O(n^2), O(n log n)）

------

### 常見屬於 P 類的演算法與問題清單

| 問題名稱                             | 解法                                        | 時間複雜度       |
| ------------------------------------ | ------------------------------------------- | ---------------- |
| 排序（Sorting）                      | Merge Sort / Heap Sort / Quick Sort（平均） | O(n log n)       |
| 二分搜尋                             | Binary Search                               | O(log n)         |
| 最短路徑（單源無負權）               | Dijkstra                                    | O((V + E) log V) |
| 最短路徑（單源可含負權）             | Bellman-Ford                                | O(VE)            |
| 最短路徑（所有點對）                 | Floyd-Warshall                              | O(V^3)           |
| 最小生成樹                           | Kruskal / Prim                              | O(E log V)       |
| 拓樸排序                             | DFS / 入度法                                | O(V + E)         |
| 最大流                               | Edmonds-Karp（BFS）                         | O(VE^2)          |
| 最大匹配（匈牙利）                   | Hungarian Algorithm                         | O(n^3)           |
| 最長公共子序列（LCS）                | 動態規劃                                    | O(nm)            |
| 0/1 背包（小容量）                   | 動態規劃                                    | O(nW)            |
| 子集合和（Subset Sum）               | 動態規劃                                    | O(nW)            |
| 矩陣乘法                             | 傳統 / Strassen                             | O(n^3) 或更優    |
| 字串匹配                             | KMP / Z-algorithm                           | O(n + m)         |
| 括號合法性檢查                       | Stack                                       | O(n)             |
| 圖的連通性檢查                       | DFS / BFS                                   | O(V + E)         |
| 雙連通元件（Biconnected Components） | Tarjan                                      | O(V + E)         |
| 拓樸排序                             | Kahn's Algorithm                            | O(V + E)         |

------

### 注意事項

- 有些問題如 Knapsack 或 Subset Sum 一般是 NP-complete，但在**特定條件下**（如容量 W 很小）可以用多項式時間演算法解決。

- P 是一個「問題集合」，裡面包含無數個已知與未來可能發現的問題。

  

---

## NP

**NP（Non-deterministic Polynomial time）** 指的是：

> 
>
> 算答案的問題，同時，用多項式時間演算法能夠驗證答案的問題。
>
> - 所有「可以在多項式時間內被**驗證**正確與否」的決定性問題集合。
> - 不保證有 polynomial time 的解法

#### 關鍵字拆解：

| 縮寫 | 意義                          |
| ---- | ----------------------------- |
| N    | Non-deterministic（非確定性） |
| P    | Polynomial time（多項式時間） |

### 與 P 的差異

| 問題類型  | 是否可在多項式時間內「**解出來**」 | 是否可在多項式時間內「**驗證正確性**」 |
| --------- | ---------------------------------- | -------------------------------------- |
| P 類問題  | ✅ 是                               | ✅ 是                                   |
| NP 類問題 | ❌ 未知（通常很難）                 | ✅ 是                                   |

✅ 如果一個問題在給定「猜的答案」後能快速驗證，那它屬於 NP。

### 🧩 直觀例子

#### ✅ NP 問題例子

| 問題                  | 描述                           | 驗證方式                                     |
| --------------------- | ------------------------------ | -------------------------------------------- |
| Subset Sum            | 是否有一組子集總和為給定值？   | 給我子集，我能加總驗證                       |
| TSP（旅行推銷員問題） | 是否存在一條路徑總距離小於 X？ | 給我一個順序，我能加總總距離                 |
| SAT（布林可滿足性）   | 是否有一組變數能滿足公式？     | 給我一組變數配置，我能代入驗證               |
| 圖著色問題            | 可否在 K 種顏色內正確上色？    | 給我每個節點的顏色，我能驗證鄰接點是否不同色 |

---

## NP-complete 

### **NP-complete（NP 完全問題）**是 NP 裡面最難的一群。

#### ✅ 判斷條件：

- ✅ 屬於 NP（給答案能驗證）
- ✅ 所有其他 NP 問題都可以在 polynomial time 歸約成它（是 NP-hard）

➡️ 換句話說：

> 如果你能在 polynomial time 解決任何一個 NP-complete 問題，就能解決所有 NP 問題 ➡️ P = NP！

#### 📘 範例：

- SAT（第一個被證明是 NP-complete）
- 3-SAT
- Subset Sum（完整版本）
- Hamiltonian Path
- TSP（成本限制版本）
- Vertex Cover、Clique

---

## NP-hard 

**NP-hard（NP 困難）問題**指的是：

> 至少和 NP-complete 問題一樣難，**但它自己不一定在 NP**（也就是不一定能在 polynomial time 驗證解）

#### ✅ 判斷條件：

- ✅ 所有 NP 問題都可以歸約成它（是 NP-hard）
- ❌ 不一定能在 polynomial time 驗證答案（可能不屬於 NP）

#### 📘 範例：

- 「找出最小成本的 Hamilton path」→ 不是決定性問題，無法驗證候選解是否為「最小」
- Halting Problem（停機問題）：不可判定問題

### 🧠 小結比較表（重點記憶）

| 類型            | 是否可以 polynomial time 驗證答案？ | 是否可以 polynomial time 解？ | 是否代表最難問題？   |
| --------------- | ----------------------------------- | ----------------------------- | -------------------- |
| **P**           | ✅ 是                                | ✅ 是                          | ❌ 否                 |
| **NP**          | ✅ 是                                | ❌ 未知（通常沒有）            | ❌ 否                 |
| **NP-complete** | ✅ 是                                | ❌ 未知（但代表最難）          | ✅ 是 NP 中最難的問題 |
| **NP-hard**     | ❌ 不一定                            | ❌ 通常更難                    | ✅ 是至少跟 NP 一樣難 |

📘 如果你看到一題問：「這個問題是不是 NP 問題？」你就要看它是否「**給我一個解，我能快速驗證它是否正確？**」

📘 如果你看到一題問：「是不是 NP-complete？」就要確認：

1. 這題是 NP 問題（可驗證）
2. 有其他已知 NP-complete 問題可以多項式時間歸約成它

---

用指數時間演算法能夠計算答案的問題，同時，用多項式時間演算法能夠驗證答案的問題。

由於 P 問題也可以改用指數時間演算法計算答案、當然可以用多項式時間驗證答案，故 P 問題都屬於 NP 問題。

```
「找出一張圖的一條Hamilton path」是NP問題。

計算答案：
窮舉所有可能的路線，一條一條驗證。
是指數時間演算法。

驗證答案：
給定一條可能的路線，就照著路線走，看看能不能走到每一點。
是多項式時間演算法。

「找出一張圖成本最小的那條Hamilton path」不是NP問題。

計算答案：
窮舉所有可能的路線，一條一條驗證。
是指數時間演算法。

驗證答案：
就算給定一條可能的路線，
還是必須窮舉所有路線，一條一條驗證，才知道哪條路線成本最少。
是指數時間演算法。
```

---

## 多項式時間歸約（Polynomial-Time Reduction）

> 如果我們可以在多項式時間內把一個問題 A 轉換為問題 B（並保留解的對應性），就表示 A 不會比 B 難。

```
假設現在有 SAT, 0/1 knapsack，現在將 SAT 的問題轉換成 0/1 knapsack，如果 0/1 knapsack 可以在多項式時間內被解決，那 SAT 就也可以在同樣的時間內解決。
如果 SAT 為 NP-hard 並 reduce 成 0/1 knapsack 那他也會是 NP-hard。
```



#### ✅ 定義：

給兩個問題 A、B，如果：

- 有一個函數 可以在多項式時間內把 A 的任意輸入 轉成 B 的輸入 
- 且 A 的輸入 x 有解 ⇔ B 的輸入 f(x) 有解

就說：

$A ≤p\ B$

表示：**A 多項式時間可歸約為 B**

### 🧪 歸約範例：SAT → 3-SAT

#### 🎯 原始子句：

```c
(x1 ∨ x2 ∨ x3 ∨ x4)
```

這不是 3-SAT，因為它有 4 個 literal。

#### 🔧 拆解：引入新變數 y1

```cpp
(x1 ∨ x2 ∨ y1) ∧ (¬y1 ∨ x3 ∨ x4)
```

- 現在每個子句都只有 3 個 literal
- 解的可滿足性維持一致

✅ 這就是一個合法的「多項式時間歸約」

#### ✅ 通用轉換（n 個 literal）

 如果一個子句長度為 n > 3：

```
(l1 ∨ l2 ∨ l3 ∨ ... ∨ ln)
```

可轉換為 n - 2 個子句，每個長度 3，並加入新變數 y1, y2, ..., y_{n-3}：

```
(l1 ∨ l2 ∨ y1) ∧ (¬y1 ∨ l3 ∨ y2) ∧ ... ∧ (¬y_{n-3} ∨ ln-1 ∨ ln)
```

這個轉換只需要線性時間完成 ✅

➡️ 所以 SAT 可以在多項式時間內歸約為 3-SAT

📘 若要證明某個問題是 NP-complete，要做到：

1. 證明它屬於 NP（可驗證）
2. 從一個已知 NP-complete 問題歸約過來 ➡️ 常見歸約來源：SAT、3-SAT、Subset Sum、TSP、Clique 等