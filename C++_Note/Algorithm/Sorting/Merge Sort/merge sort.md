# Merge Sort ç­†è¨˜èˆ‡éè¿´è€ƒé¡Œæ•´ç†

## ç­†è¨˜

### 1. Merge Sort çš„éè¿´éç¨‹
- `merge_sorted_recursion(a, l, r)`ï¼šé€é **Divide and Conquerï¼ˆåˆ†æ²»æ³•ï¼‰** ä¾†æ’åºé™£åˆ—ã€‚
- æ¯æ¬¡éè¿´éƒ½å°‡é™£åˆ—åˆ†æˆå·¦å³å…©åŠï¼Œç›´åˆ°åªå‰©ä¸€å€‹å…ƒç´ ã€‚
- åˆ†å‰²å¾Œï¼Œéè¿´åˆä½µå…©å€‹å·²æ’åºçš„å­é™£åˆ—ã€‚

### 2. `merge_sorted_array(a, l, mid, r)` åˆä½µéç¨‹
- å…ˆè¤‡è£½å·¦å³å…©å€‹å­é™£åˆ—ï¼š
  ```cpp
  int left_length = mid - l + 1;
  int right_length = r - mid;
  int left_array[left_length];  // å·¦å´å­é™£åˆ—
  int right_array[right_length]; // å³å´å­é™£åˆ—
  ```
- é€æ­¥æ¯”è¼ƒ `left_array` å’Œ `right_array`ï¼Œä¸¦å¡«å› `a[]`ã€‚
- è‹¥å…¶ä¸­ä¸€å€‹å­é™£åˆ—å·²ç¶“å¡«å®Œï¼Œç›´æ¥å°‡å¦ä¸€å€‹å­é™£åˆ—çš„å‰©é¤˜éƒ¨åˆ†è¤‡è£½å›å»ã€‚
- **æ¢ä»¶åˆ¤æ–·è§£é‡‹ï¼š**
  
  ```
  //                   i
  //  left_array = 4 9 12
  //                 j
  // right_array = 5 8 14
  //                   k
  //           a = 4 5
  ```

  ```cpp
  if (i < left_length && (j >= right_length || left_array[i] <= right_array[j]))
  ```
  **é€™å€‹æ¢ä»¶çš„ä½œç”¨æ˜¯æ±ºå®šæ‡‰è©²é¸æ“‡ `left_array[i]` é‚„æ˜¯ `right_array[j]` ä¾†å¡«å…¥çµæœé™£åˆ—ã€‚æ¢ä»¶åˆ†ç‚ºä¸‰éƒ¨åˆ†ï¼š**
  1. `i < left_length`ï¼šç¢ºä¿ `i` é‚„æ²’æœ‰è¶…å‡º `left_array` çš„ç¯„åœã€‚
  2. `j >= right_length`ï¼šå¦‚æœ `j` è¶…å‡ºäº† `right_array` çš„ç¯„åœï¼Œä»£è¡¨ `right_array` å·²ç¶“ç”¨å®Œï¼Œæ­¤æ™‚åªèƒ½é¸æ“‡ `left_array[i]`ã€‚
  3. `left_array[i] <= right_array[j]`ï¼šç•¶ `left_array[i]` çš„å€¼è¼ƒå°æ™‚ï¼Œæ‡‰è©²é¸æ“‡ `left_array[i]` ä¾†ç¢ºä¿æ’åºçµæœæ­£ç¢ºã€‚
  **é€™æ¨£çš„åˆ¤æ–·æ¢ä»¶èƒ½å¤ ç¢ºä¿åˆä½µæ™‚çš„ç©©å®šæ€§ï¼Œä¸”èƒ½å¤ åœ¨ `right_array` å·²ç¶“è€—ç›¡çš„æƒ…æ³ä¸‹ï¼Œä»ç„¶æ­£ç¢ºè™•ç†å‰©é¤˜çš„ `left_array` å…ƒç´ ã€‚**

### 3. Stack èˆ‡ Heap çš„è¨˜æ†¶é«”åˆ†é…
- **Stackï¼ˆå †ç–Šï¼‰ï¼š**
  - éè¿´å‡½æ•¸å‘¼å«æ™‚ï¼Œæ¯æ¬¡éƒ½æœƒåœ¨ Stack ä¸Šå»ºç«‹æ–°çš„ frameï¼ŒåŒ…å« `l, r, mid` åŠå‡½æ•¸è®Šæ•¸ã€‚
  - éè¿´æ·±åº¦ç‚º `O(log N)`ï¼Œè‹¥ `N` å¾ˆå¤§ï¼ˆå¦‚ `10^6`ï¼‰ï¼Œå¯èƒ½å°è‡´ **Stack Overflow**ã€‚
  - **ç­†è¨˜ï¼š** è‹¥ `N` éå¤§ï¼Œéè¿´éæ·±æœƒå°è‡´ `Stack Overflow`ï¼Œéœ€ä½¿ç”¨ **è¿­ä»£** æˆ– **Heap åˆ†é…** æš«å­˜é™£åˆ—ã€‚
- **Heapï¼ˆå †ï¼‰ï¼š**
  - `left_array` å’Œ `right_array` é è¨­åœ¨ **Stack ä¸Š** åˆ†é…ï¼Œå¯èƒ½å°è‡´è¨˜æ†¶é«”çˆ†æ‰ã€‚
  - **ç­†è¨˜ï¼š** å»ºè­°ä½¿ç”¨ `new` åˆ†é…è¨˜æ†¶é«”ï¼Œé¿å… stack é™åˆ¶ã€‚
  - è§£æ±ºæ–¹æ³•ï¼šæ”¹ç”¨ Heap åˆ†é…
    ```cpp
    int* left_array = new int[left_length];
    int* right_array = new int[right_length];
    ```
  - ä½¿ç”¨å®Œç•¢å¾Œè¨˜å¾—é‡‹æ”¾è¨˜æ†¶é«”ï¼š
    ```cpp
    delete[] left_array;
    delete[] right_array;
    ```

### 4. Merge Sort æ™‚é–“è¤‡é›œåº¦
- **Best / Average / Worst Case:** `O(N log N)`
- **éè¿´å‘¼å«æ¬¡æ•¸ï¼š** `O(log N)` å±¤ï¼Œæ¯å±¤ `O(N)` åˆä½µã€‚
- **ç­†è¨˜ï¼š** éè¿´çš„åˆä½µæ­¥é©Ÿæ˜¯ `O(N)`ï¼Œä½†ç¸½å…±æœ‰ `O(log N)` å±¤ï¼Œæ‰€ä»¥æ•´é«”è¤‡é›œåº¦æ˜¯ `O(N log N)`ã€‚

## ğŸ“ éè¿´è€ƒé¡Œ

### **1. éè¿´æ·±åº¦èˆ‡å‘¼å«æ¬¡æ•¸**
**å•é¡Œï¼š** 
å‡è¨­å°é•·åº¦ç‚º `N` çš„é™£åˆ—åŸ·è¡Œ `merge_sort`ï¼Œ`merge_sorted_recursion(a, l, r)` æœ€å¤šæœƒå‘¼å«å¤šå°‘æ¬¡ï¼Ÿ

**è§£ç­”ï¼š**
- éè¿´æ·±åº¦ç‚º `O(log N)`ï¼Œæ¯å±¤åˆä½µçš„æ•¸é‡ `O(N)`ã€‚
- ç¸½å‘¼å«æ¬¡æ•¸ `O(N log N)`ã€‚

---

### **2. éè¿´åŸºåº•æ¢ä»¶**
**å•é¡Œï¼š**
`merge_sorted_recursion(a, l, r)` çš„åŸºåº•æ¢ä»¶æ˜¯ `if (l < r)`ï¼Œå¦‚æœæ”¹æˆ `if (l <= r)` æœƒç™¼ç”Ÿä»€éº¼æƒ…æ³ï¼Ÿ

**è§£ç­”ï¼š**
- `l == r` ä»ç„¶æœƒéè¿´ï¼Œé€ æˆ **ç„¡é™éè¿´**ã€‚
- **ç­†è¨˜ï¼š** éè¿´çš„åŸºåº•æ¢ä»¶æ‡‰ç¢ºä¿éè¿´èƒ½çµ‚æ­¢ï¼Œå¦å‰‡æœƒå°è‡´ Stack Overflowã€‚
- æ­£ç¢ºæ¢ä»¶æ‡‰è©²æ˜¯ `if (l < r)`ï¼Œç¢ºä¿åªæœ‰ç•¶å€é–“é•·åº¦ **è‡³å°‘ç‚º2** æ‰æœƒç¹¼çºŒåˆ†å‰²ã€‚

---

é€™äº›é¡Œå‹å¯ä»¥å¹«åŠ©ä½ æ¸¬è©¦å° `merge_sort` çš„ç†è§£ï¼ŒåŒ…æ‹¬ **éè¿´ã€è¨˜æ†¶é«”ç®¡ç†ã€éŒ¯èª¤è™•ç†ã€æœ€ä½³åŒ–æŠ€å·§**ï¼Œè®“ä½ åœ¨è€ƒè©¦æˆ–é¢è©¦æ™‚æ›´æœ‰æŠŠæ¡ï¼


